services:
  - type: web
    name: mbotamapay-backend
    env: nixpacks
    plan: free
    region: oregon
    autoDeploy: true
    healthCheckPath: /api/v1/actuator/health
    buildCommand: ./gradlew clean bootJar
    startCommand: java -XX:ActiveProcessorCount=2 -jar build/libs/mbotamapay-backend.jar
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: JAVA_VERSION
        value: "21"
      - key: DATABASE_URL
        value: "jdbc:postgresql://ep-raspy-wildflower-ahd04xp0-pooler.c-3.us-east-1.aws.neon.tech:5432/mbotama-pay-db?sslmode=require"
      - key: DATABASE_USERNAME
        value: "neondb_owner"
      - key: DATABASE_PASSWORD
        value: ""
      - key: JWT_SECRET
        value: ""
        previewValue: "change-me-in-render"
      - key: CORS_ORIGINS
        value: "https://mbotamapay.com"
      - key: MAIL_HOST
        value: "smtp.gmail.com"
      - key: MAIL_PORT
        value: "587"
      - key: MAIL_USERNAME
        value: ""
      - key: MAIL_PASSWORD
        value: ""
      - key: FEEXPAY_API_URL
        value: "https://api.feexpay.me"
      - key: FEEXPAY_API_KEY
        value: ""
      - key: FEEXPAY_SHOP_ID
        value: ""
      - key: CINETPAY_API_URL
        value: "https://api-checkout.cinetpay.com/v2"
      - key: CINETPAY_API_KEY
        value: ""
      - key: CINETPAY_SITE_ID
        value: ""
      - key: PAYTECH_API_URL
        value: "https://paytech.sn/api"
      - key: PAYTECH_API_KEY
        value: ""
      - key: PAYTECH_API_SECRET
        value: ""
      - key: APP_BASE_URL
        value: ""
        previewValue: "https://mbotamapay-backend.onrender.com"
      - key: APP_FRONTEND_URL
        value: ""
        previewValue: "https://mbotamapay.com"
      - key: SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE
        value: "5"
      - key: SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE
        value: "0"
      - key: SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT
        value: "30000"
