services:
  - type: web
    name: mbotamapay-backend
    env: docker
    plan: free
    region: oregon
    autoDeploy: true
    healthCheckPath: /api/v1/actuator/health
    dockerfilePath: Dockerfile
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: JAVA_VERSION
        value: "21"
      - key: DATABASE_URL
        value: "jdbc:postgresql://ep-raspy-wildflower-ahd04xp0-pooler.c-3.us-east-1.aws.neon.tech:5432/mbotama-pay-db?sslmode=require"
      - key: DATABASE_USERNAME
        value: "neondb_owner"
      - key: DATABASE_PASSWORD
        sync: false  # Set this in Render Dashboard as a secret
      - key: JWT_SECRET
        sync: false  # Set this in Render Dashboard as a secret
        previewValue: "change-me-in-render"
      - key: CORS_ORIGINS
        value: "https://mbotamapay.com,https://v0-mbotama-pay.vercel.app,https://v0-mbotama-3xjligspq-aurlin05s-projects.vercel.app"
      - key: CORS_ORIGIN_PATTERNS
        value: "https://*.vercel.app,https://mbotamapay.com"
      - key: MAIL_HOST
        value: "smtp.gmail.com"
      - key: MAIL_PORT
        value: "587"
      - key: MAIL_USERNAME
        sync: false  # Set this in Render Dashboard
      - key: MAIL_PASSWORD
        sync: false  # Set this in Render Dashboard as a secret
      - key: EMAIL_PROVIDER
        value: "brevo"
      - key: BREVO_API_KEY
        sync: false  # Set this in Render Dashboard as a secret
      - key: SMS_ENABLED
        value: "false"
      - key: FEEXPAY_API_URL
        value: "https://api.feexpay.me"
      - key: FEEXPAY_API_KEY
        sync: false  # Set this in Render Dashboard as a secret
      - key: FEEXPAY_SHOP_ID
        sync: false  # Set this in Render Dashboard
      - key: CINETPAY_API_URL
        value: "https://api-checkout.cinetpay.com/v2"
      - key: CINETPAY_API_KEY
        sync: false  # Set this in Render Dashboard as a secret
      - key: CINETPAY_SITE_ID
        sync: false  # Set this in Render Dashboard
      - key: PAYTECH_API_URL
        value: "https://paytech.sn/api"
      - key: PAYTECH_API_KEY
        sync: false  # Set this in Render Dashboard as a secret
      - key: PAYTECH_API_SECRET
        sync: false  # Set this in Render Dashboard as a secret
      - key: APP_BASE_URL
        sync: false  # Set this in Render Dashboard
        previewValue: "https://mbotamapay-backend.onrender.com"
      - key: APP_FRONTEND_URL
        value: "https://v0-mbotama-pay.vercel.app"
        previewValue: "https://mbotamapay.com"
      - key: SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE
        value: "5"
      - key: SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE
        value: "0"
      - key: SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT
        value: "30000"
